<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FUT IBN - Peladinha da Igreja</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;700;900&display=swap" rel="stylesheet">
  
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Outfit', sans-serif;
      overflow-x: hidden;
    }
    
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .animate-fadeIn {
      animation: fadeIn 0.5s ease-out;
    }
    
    ::-webkit-scrollbar {
      width: 10px;
    }
    
    ::-webkit-scrollbar-track {
      background: #1e293b;
    }
    
    ::-webkit-scrollbar-thumb {
      background: #3b82f6;
      border-radius: 5px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: #2563eb;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getFirestore, doc, setDoc, getDoc, getDocs, collection, updateDoc, deleteDoc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

    const firebaseConfig = {
      apiKey: "AIzaSyC2MkBKQsiPpS3ZqUnKoNS5cWf3NYhVNJc",
      authDomain: "fut-ibn.firebaseapp.com",
      projectId: "fut-ibn",
      storageBucket: "fut-ibn.firebasestorage.app",
      messagingSenderId: "786788861968",
      appId: "1:786788861968:web:0096c2eb65a62239b46295"
    };

    const app = initializeApp(firebaseConfig);
    window.db = getFirestore(app);
    window.firestoreModules = { doc, setDoc, getDoc, getDocs, collection, updateDoc, deleteDoc, onSnapshot };
  </script>
  
  <script type="text/babel">
    const { useState, useEffect } = React;
    const { doc, setDoc, getDoc, getDocs, collection, updateDoc, deleteDoc, onSnapshot } = window.firestoreModules;
    const db = window.db;

    const ADMIN_CODE = "1313";

    // Fun√ß√£o para pegar todos os s√°bados de um m√™s
    function getSaturdays(year, month) {
      const saturdays = [];
      const date = new Date(year, month, 1);
      
      while (date.getMonth() === month) {
        if (date.getDay() === 6) { // 6 = S√°bado
          saturdays.push(new Date(date));
        }
        date.setDate(date.getDate() + 1);
      }
      
      return saturdays;
    }

    function FutIBNApp() {
      const [loading, setLoading] = useState(true);
      const [currentView, setCurrentView] = useState('login');
      const [playerData, setPlayerData] = useState(null);
      const [allPlayers, setAllPlayers] = useState([]);
      const [editingPlayer, setEditingPlayer] = useState(null);
      const [gameDates, setGameDates] = useState([]);
      const [editingDate, setEditingDate] = useState(null);
      
      const [formData, setFormData] = useState({
        name: '',
        phone: '',
        adminCode: '',
        isAdmin: false,
        isNewUser: true
      });

      useEffect(() => {
        const checkLogin = async () => {
          const savedPhone = localStorage.getItem('futibn_phone');
          const savedName = localStorage.getItem('futibn_name');
          const isAdmin = localStorage.getItem('futibn_admin') === 'true';
          
          if (isAdmin) {
            setCurrentView('admin');
            await loadAllPlayers();
            await loadGameDates();
          } else if (savedPhone) {
            const playerDoc = await getDoc(doc(db, 'players', savedPhone));
            if (playerDoc.exists()) {
              setPlayerData(playerDoc.data());
              setCurrentView('player');
              await loadGameDates();
              
              onSnapshot(doc(db, 'players', savedPhone), (doc) => {
                if (doc.exists()) {
                  setPlayerData(doc.data());
                }
              });
            } else {
              localStorage.removeItem('futibn_phone');
              localStorage.removeItem('futibn_name');
              setCurrentView('login');
            }
          } else {
            setCurrentView('login');
          }
          
          setLoading(false);
        };

        checkLogin();
      }, []);

      useEffect(() => {
        if (currentView === 'admin') {
          const unsubscribe = onSnapshot(collection(db, 'players'), (snapshot) => {
            const players = [];
            snapshot.forEach((doc) => {
              players.push({ id: doc.id, ...doc.data() });
            });
            setAllPlayers(players);
          });

          return () => unsubscribe();
        }
      }, [currentView]);

      const loadAllPlayers = async () => {
        const querySnapshot = await getDocs(collection(db, 'players'));
        const players = [];
        querySnapshot.forEach((doc) => {
          players.push({ id: doc.id, ...doc.data() });
        });
        setAllPlayers(players);
      };

      const loadGameDates = async () => {
        const datesDoc = await getDoc(doc(db, 'config', 'gameDates'));
        
        if (datesDoc.exists()) {
          setGameDates(datesDoc.data().dates || []);
        } else {
          // Inicializa com os s√°bados do m√™s atual de 2026
          const now = new Date();
          const currentMonth = now.getMonth(); // 0-11
          const saturdays = getSaturdays(2026, currentMonth);
          
          const dates = saturdays.map(date => ({
            date: date.toISOString().split('T')[0],
            time: '15:00-16:00',
            location: 'Arena Guar√° (Ao lado do Du lanches)',
            active: true
          }));
          
          await setDoc(doc(db, 'config', 'gameDates'), { dates });
          setGameDates(dates);
        }
      };

      const handleRegisterOrLogin = async (e) => {
        e.preventDefault();
        
        if (formData.isAdmin) {
          if (formData.adminCode === ADMIN_CODE) {
            localStorage.setItem('futibn_admin', 'true');
            setCurrentView('admin');
            await loadAllPlayers();
            await loadGameDates();
            return;
          } else {
            alert('C√≥digo de admin incorreto!');
            return;
          }
        }

        // SE √â NOVO CADASTRO
        if (formData.isNewUser) {
          const cleanPhone = formData.phone.replace(/\D/g, '');
          
          if (cleanPhone.length < 10) {
            alert('Digite um telefone v√°lido!');
            return;
          }

          if (!formData.name.trim()) {
            alert('Digite seu nome completo!');
            return;
          }

          try {
            // Verifica se telefone j√° existe
            const playerDoc = await getDoc(doc(db, 'players', cleanPhone));
            
            if (playerDoc.exists()) {
              alert('Este telefone j√° est√° cadastrado! Use a op√ß√£o "J√° Sou Cadastrado" e digite seu nome.');
              return;
            }

            // BUSCA OS TIMES E COLETES ATUAIS
            const configDoc = await getDoc(doc(db, 'config', 'teamVests'));
            let teamVests = {};
            
            if (configDoc.exists()) {
              teamVests = configDoc.data();
            } else {
              // Primeira vez: sorteia coletes para cada time
              const vests = ['azul', 'vermelho', 'sem colete'];
              const shuffledVests = [...vests].sort(() => Math.random() - 0.5);
              
              teamVests = {
                team1: shuffledVests[0],
                team2: shuffledVests[1],
                team3: shuffledVests[2]
              };
              
              await setDoc(doc(db, 'config', 'teamVests'), teamVests);
            }

            // Conta quantos jogadores tem em cada time
            const allPlayersSnapshot = await getDocs(collection(db, 'players'));
            const teamCounts = { 1: 0, 2: 0, 3: 0 };
            
            allPlayersSnapshot.forEach((doc) => {
              const player = doc.data();
              if (player.team) {
                teamCounts[player.team]++;
              }
            });

            // Coloca no time com menos jogadores
            let assignedTeam = 1;
            if (teamCounts[2] < teamCounts[1]) {
              assignedTeam = 2;
            }
            if (teamCounts[3] < Math.min(teamCounts[1], teamCounts[2])) {
              assignedTeam = 3;
            }

            // Pega o colete do time
            const vestMap = {
              1: teamVests.team1,
              2: teamVests.team2,
              3: teamVests.team3
            };

            const newPlayer = {
              name: formData.name.trim(),
              phone: cleanPhone,
              team: assignedTeam,
              vest: vestMap[assignedTeam],
              registeredAt: new Date().toISOString()
            };

            await setDoc(doc(db, 'players', cleanPhone), newPlayer);
            
            setPlayerData(newPlayer);
            localStorage.setItem('futibn_phone', cleanPhone);
            localStorage.setItem('futibn_name', formData.name.trim());
            setCurrentView('player');
            await loadGameDates();
            
            onSnapshot(doc(db, 'players', cleanPhone), (doc) => {
              if (doc.exists()) {
                setPlayerData(doc.data());
              }
            });
            
          } catch (error) {
            alert('Erro: ' + error.message);
          }
        } 
        // SE J√Å √â CADASTRADO - LOGIN POR NOME
        else {
          if (!formData.name.trim()) {
            alert('Digite seu nome completo!');
            return;
          }

          try {
            // Busca pelo nome
            const allPlayersSnapshot = await getDocs(collection(db, 'players'));
            let foundPlayer = null;
            let foundPhone = null;
            
            allPlayersSnapshot.forEach((doc) => {
              const player = doc.data();
              if (player.name.toLowerCase() === formData.name.trim().toLowerCase()) {
                foundPlayer = player;
                foundPhone = doc.id;
              }
            });

            if (foundPlayer) {
              setPlayerData(foundPlayer);
              localStorage.setItem('futibn_phone', foundPhone);
              localStorage.setItem('futibn_name', foundPlayer.name);
              setCurrentView('player');
              await loadGameDates();
              
              onSnapshot(doc(db, 'players', foundPhone), (doc) => {
                if (doc.exists()) {
                  setPlayerData(doc.data());
                }
              });
            } else {
              alert('Nome n√£o encontrado! Verifique se digitou corretamente ou fa√ßa um novo cadastro.');
            }
            
          } catch (error) {
            alert('Erro: ' + error.message);
          }
        }
      };

      const handleLogout = () => {
        localStorage.removeItem('futibn_phone');
        localStorage.removeItem('futibn_name');
        localStorage.removeItem('futibn_admin');
        setPlayerData(null);
        setFormData({ name: '', phone: '', adminCode: '', isAdmin: false, isNewUser: true });
        setCurrentView('login');
      };

      const removerJogador = async (playerId) => {
        if (!window.confirm('Tem certeza que deseja remover este jogador?')) {
          return;
        }

        await deleteDoc(doc(db, 'players', playerId));
        alert('Jogador removido!');
      };

      const editarNome = async (playerId, newName) => {
        if (!newName || !newName.trim()) {
          alert('Nome n√£o pode ser vazio!');
          return;
        }

        await updateDoc(doc(db, 'players', playerId), {
          name: newName.trim()
        });

        setEditingPlayer(null);
        alert('Nome atualizado!');
      };

      const resetarTimes = async () => {
        if (!window.confirm('Tem certeza que deseja resetar TODOS os times? Todos os jogadores ter√£o novos times sorteados!')) {
          return;
        }

        // Sorteia novos coletes para cada time
        const vests = ['azul', 'vermelho', 'sem colete'];
        const shuffledVests = [...vests].sort(() => Math.random() - 0.5);
        
        const teamVests = {
          team1: shuffledVests[0],
          team2: shuffledVests[1],
          team3: shuffledVests[2]
        };
        
        await setDoc(doc(db, 'config', 'teamVests'), teamVests);

        // Embaralha jogadores
        const shuffledPlayers = [...allPlayers].sort(() => Math.random() - 0.5);
        
        // Distribui nos times
        for (let i = 0; i < shuffledPlayers.length; i++) {
          const player = shuffledPlayers[i];
          const teamNum = (i % 3) + 1; // 1, 2 ou 3
          const vest = teamVests[`team${teamNum}`];

          await updateDoc(doc(db, 'players', player.id), {
            team: teamNum,
            vest: vest
          });
        }

        alert('Times resetados! Todos receberam novos times aleat√≥rios!');
      };

      const toggleGameDate = async (index) => {
        const newDates = [...gameDates];
        newDates[index].active = !newDates[index].active;
        
        await updateDoc(doc(db, 'config', 'gameDates'), {
          dates: newDates
        });
        
        setGameDates(newDates);
      };

      const addGameDate = async () => {
        const dateInput = prompt('Digite a data do jogo (formato: AAAA-MM-DD)\nEx: 2026-01-31');
        
        if (!dateInput) return;
        
        const newDate = {
          date: dateInput,
          time: '15:00-16:00',
          location: 'Arena Guar√° (Ao lado do Du lanches)',
          active: true
        };
        
        const newDates = [...gameDates, newDate].sort((a, b) => a.date.localeCompare(b.date));
        
        await updateDoc(doc(db, 'config', 'gameDates'), {
          dates: newDates
        });
        
        setGameDates(newDates);
        alert('Data adicionada!');
      };

      const removeGameDate = async (index) => {
        if (!window.confirm('Tem certeza que deseja remover esta data?')) {
          return;
        }
        
        const newDates = gameDates.filter((_, i) => i !== index);
        
        await updateDoc(doc(db, 'config', 'gameDates'), {
          dates: newDates
        });
        
        setGameDates(newDates);
        alert('Data removida!');
      };

      if (loading) {
        return (
          <div className="min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-green-900 flex items-center justify-center">
            <div className="text-white text-2xl font-bold animate-pulse">‚öΩ Carregando FUT IBN...</div>
          </div>
        );
      }

      if (currentView === 'login') {
        return (
          <div className="min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-green-900 flex items-center justify-center p-4">
            <div className="absolute inset-0 overflow-hidden pointer-events-none">
              <div className="absolute top-20 left-20 w-64 h-64 bg-blue-500 rounded-full opacity-10 blur-3xl"></div>
              <div className="absolute bottom-20 right-20 w-96 h-96 bg-green-500 rounded-full opacity-10 blur-3xl"></div>
            </div>

            <div className="relative max-w-md w-full">
              <div className="bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border-4 border-blue-600">
                <div className="text-center mb-8">
                  <div className="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-600 to-green-600 rounded-full mb-4">
                    <span className="text-4xl">‚öΩ</span>
                  </div>
                  <h1 className="text-4xl font-black text-blue-900 mb-2" style={{fontFamily: 'Outfit, sans-serif'}}>
                    FUT IBN
                  </h1>
                  <p className="text-gray-600 font-medium">Peladinha da Igreja</p>
                </div>

                <div className="flex gap-2 mb-6">
                  <button
                    onClick={() => setFormData({...formData, isAdmin: false, isNewUser: true})}
                    className={`flex-1 py-3 rounded-xl font-bold transition-all ${
                      !formData.isAdmin && formData.isNewUser
                        ? 'bg-blue-600 text-white shadow-lg' 
                        : 'bg-gray-100 text-gray-600'
                    }`}
                  >
                    üÜï Novo Cadastro
                  </button>
                  <button
                    onClick={() => setFormData({...formData, isAdmin: false, isNewUser: false})}
                    className={`flex-1 py-3 rounded-xl font-bold transition-all ${
                      !formData.isAdmin && !formData.isNewUser
                        ? 'bg-green-600 text-white shadow-lg' 
                        : 'bg-gray-100 text-gray-600'
                    }`}
                  >
                    ‚úÖ J√° Sou Cadastrado
                  </button>
                  <button
                    onClick={() => setFormData({...formData, isAdmin: true})}
                    className={`flex-1 py-3 rounded-xl font-bold transition-all ${
                      formData.isAdmin 
                        ? 'bg-purple-600 text-white shadow-lg' 
                        : 'bg-gray-100 text-gray-600'
                    }`}
                  >
                    üëë Admin
                  </button>
                </div>

                <form onSubmit={handleRegisterOrLogin} className="space-y-4">
                  {formData.isAdmin ? (
                    <>
                      <div>
                        <label className="block text-sm font-bold text-gray-700 mb-2">C√≥digo de Acesso</label>
                        <input
                          type="password"
                          required
                          value={formData.adminCode}
                          onChange={(e) => setFormData({...formData, adminCode: e.target.value})}
                          className="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none transition-colors text-center text-2xl font-bold"
                          placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                          maxLength="4"
                        />
                      </div>
                      <button
                        type="submit"
                        className="w-full py-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all"
                      >
                        üëë Entrar como Admin
                      </button>
                    </>
                  ) : formData.isNewUser ? (
                    <>
                      <div>
                        <label className="block text-sm font-bold text-gray-700 mb-2">üì± Seu Telefone</label>
                        <input
                          type="tel"
                          required
                          value={formData.phone}
                          onChange={(e) => setFormData({...formData, phone: e.target.value})}
                          className="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-colors text-center text-xl font-bold"
                          placeholder="(31) 99999-9999"
                        />
                      </div>

                      <div>
                        <label className="block text-sm font-bold text-gray-700 mb-2">üë§ Nome Completo</label>
                        <input
                          type="text"
                          required
                          value={formData.name}
                          onChange={(e) => setFormData({...formData, name: e.target.value})}
                          className="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-colors"
                          placeholder="Jo√£o Silva"
                        />
                        <p className="text-xs text-gray-500 mt-2 text-center">
                          Digite nome e sobrenome completo
                        </p>
                      </div>

                      <button
                        type="submit"
                        className="w-full py-4 bg-gradient-to-r from-blue-600 to-green-600 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all"
                      >
                        ‚öΩ Cadastrar e Ver Meu Time
                      </button>
                    </>
                  ) : (
                    <>
                      <div>
                        <label className="block text-sm font-bold text-gray-700 mb-2">üë§ Nome Completo</label>
                        <input
                          type="text"
                          required
                          value={formData.name}
                          onChange={(e) => setFormData({...formData, name: e.target.value})}
                          className="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-green-500 focus:outline-none transition-colors"
                          placeholder="Jo√£o Silva"
                        />
                        <p className="text-xs text-gray-500 mt-2 text-center">
                          Digite o mesmo nome usado no cadastro
                        </p>
                      </div>

                      <button
                        type="submit"
                        className="w-full py-4 bg-gradient-to-r from-green-600 to-blue-600 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all"
                      >
                        ‚öΩ Entrar e Ver Meu Time
                      </button>
                    </>
                  )}
                </form>

                <div className="mt-6 text-center">
                  <p className="text-xs text-gray-400">
                    Sistema seguro ‚Ä¢ Um telefone = Uma conta
                  </p>
                </div>
              </div>
            </div>
          </div>
        );
      }

      if (currentView === 'player' && playerData) {
        const vestColors = {
          'azul': { gradient: 'from-blue-500 to-blue-700', bg: 'bg-blue-500', emoji: 'üîµ' },
          'vermelho': { gradient: 'from-red-500 to-red-700', bg: 'bg-red-500', emoji: 'üî¥' },
          'sem colete': { gradient: 'from-gray-500 to-gray-700', bg: 'bg-gray-500', emoji: '‚ö™' }
        };

        const vestInfo = vestColors[playerData.vest];

        const activeDates = gameDates.filter(d => d.active);

        return (
          <div className="min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-green-900 p-4">
            <div className="absolute inset-0 overflow-hidden pointer-events-none">
              <div className="absolute top-20 right-20 w-64 h-64 bg-blue-400 rounded-full opacity-10 blur-3xl"></div>
              <div className="absolute bottom-40 left-20 w-96 h-96 bg-green-400 rounded-full opacity-10 blur-3xl"></div>
            </div>

            <div className="relative max-w-2xl mx-auto pt-8">
              <div className="bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-6 mb-6 border-4 border-blue-600">
                <div className="flex items-center justify-between">
                  <div className="flex items-center gap-4">
                    <div className="w-16 h-16 bg-gradient-to-br from-blue-600 to-green-600 rounded-full flex items-center justify-center">
                      <span className="text-3xl">‚öΩ</span>
                    </div>
                    <div>
                      <h1 className="text-2xl font-black text-blue-900" style={{fontFamily: 'Outfit, sans-serif'}}>
                        FUT IBN
                      </h1>
                      <p className="text-gray-600 font-medium">Ol√°, {playerData.name}! üôè</p>
                    </div>
                  </div>
                  <button
                    onClick={handleLogout}
                    className="px-4 py-2 bg-red-500 text-white rounded-xl font-bold hover:bg-red-600 transition-colors"
                  >
                    Sair
                  </button>
                </div>
              </div>

              <div className="bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border-4 border-blue-600 mb-6">
                <div className="text-center space-y-6 animate-fadeIn">
                  <div className={`p-6 bg-gradient-to-r ${vestInfo.gradient} rounded-2xl shadow-xl mb-6`}>
                    <div className="text-white space-y-2">
                      <div className="text-6xl mb-2">{vestInfo.emoji}</div>
                      <h2 className="text-3xl font-black">
                        VOC√ä EST√Å NO TIME {playerData.team}!
                      </h2>
                      <p className="text-xl font-bold text-white/90">
                        Seu colete: {playerData.vest.toUpperCase()}
                      </p>
                    </div>
                  </div>

                  <div className="inline-block">
                    <div className={`text-9xl font-black bg-gradient-to-br ${vestInfo.gradient} bg-clip-text text-transparent`}>
                      TIME {playerData.team}
                    </div>
                  </div>

                  <div className={`inline-flex items-center gap-4 px-10 py-5 bg-gradient-to-r ${vestInfo.gradient} rounded-2xl shadow-xl`}>
                    <div className="w-16 h-16 bg-white rounded-full flex items-center justify-center">
                      <span className="text-4xl">üëï</span>
                    </div>
                    <div className="text-left">
                      <div className="text-xs text-white/80 font-bold uppercase tracking-wide">Voc√™ vai usar</div>
                      <div className="text-3xl font-black text-white capitalize">
                        Colete {playerData.vest}
                      </div>
                    </div>
                  </div>

                  <div className="pt-8 border-t-2 border-gray-200">
                    <div className="space-y-3">
                      <p className="text-2xl font-black text-gray-800">
                        üéâ Tudo certo!
                      </p>
                      <p className="text-lg text-gray-600 font-medium">
                        Vejo voc√™ no jogo! Que Deus aben√ßoe! üôè‚öΩ
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              {/* CALEND√ÅRIO DE JOGOS */}
              <div className="bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-6 border-4 border-green-600">
                <div className="flex items-center gap-3 mb-6">
                  <span className="text-3xl">üóìÔ∏è</span>
                  <div>
                    <h2 className="text-2xl font-black text-gray-800">Calend√°rio de Jogos - Janeiro 2026</h2>
                    <p className="text-gray-600 font-medium">Pr√≥ximos jogos do m√™s</p>
                  </div>
                </div>

                {activeDates.length > 0 ? (
                  <>
                    {/* LISTA DE DATAS */}
                    <div className="bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6 border-2 border-green-200 mb-6">
                      <div className="space-y-2">
                        {activeDates.map((gameDate, idx) => {
                          const date = new Date(gameDate.date + 'T00:00:00');
                          const dayName = date.toLocaleDateString('pt-BR', { weekday: 'long' });
                          const dateStr = date.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit', year: 'numeric' });
                          
                          return (
                            <div key={idx} className="font-bold text-gray-800 capitalize flex items-center gap-2">
                              <span className="text-green-600">‚öΩ</span>
                              {dayName}, {dateStr}
                            </div>
                          );
                        })}
                      </div>
                    </div>

                    {/* QUADRO DE HOR√ÅRIO E LOCAL */}
                    <div className="grid md:grid-cols-2 gap-4">
                      <div className="bg-blue-50 rounded-xl p-4 border-2 border-blue-200">
                        <div className="font-black text-gray-700 mb-2">HOR√ÅRIO:</div>
                        <div className="flex items-center gap-2 text-lg font-bold text-blue-700">
                          <span className="text-2xl">‚è∞</span>
                          15:00 √†s 16:00
                        </div>
                      </div>

                      <div className="bg-green-50 rounded-xl p-4 border-2 border-green-200">
                        <div className="font-black text-gray-700 mb-2">LOCAL:</div>
                        <div className="flex items-center gap-2 text-lg font-bold text-green-700">
                          <span className="text-2xl">üìç</span>
                          Arena Guar√°<br/>(Ao lado do Du lanches)
                        </div>
                      </div>
                    </div>
                  </>
                ) : (
                  <div className="text-center py-8 text-gray-500">
                    Nenhum jogo agendado no momento
                  </div>
                )}
              </div>

              <div className="mt-6 bg-white/80 backdrop-blur-xl rounded-2xl p-4 text-center">
                <p className="text-gray-600 text-sm font-medium">
                  üìû Telefone cadastrado: {playerData.phone}
                </p>
              </div>
            </div>
          </div>
        );
      }

      if (currentView === 'admin') {
        const team1 = allPlayers.filter(p => p.team === 1);
        const team2 = allPlayers.filter(p => p.team === 2);
        const team3 = allPlayers.filter(p => p.team === 3);

        const getTeamVest = (teamNum) => {
          const player = allPlayers.find(p => p.team === teamNum);
          return player?.vest || null;
        };

        const team1Vest = getTeamVest(1);
        const team2Vest = getTeamVest(2);
        const team3Vest = getTeamVest(3);

        const vestColors = {
          'azul': { gradient: 'from-blue-500 to-blue-700', text: 'Colete Azul üîµ' },
          'vermelho': { gradient: 'from-red-500 to-red-700', text: 'Colete Vermelho üî¥' },
          'sem colete': { gradient: 'from-gray-600 to-gray-800', text: 'Sem Colete ‚ö™' }
        };

        return (
          <div className="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4">
            <div className="max-w-7xl mx-auto py-8">
              <div className="bg-gradient-to-r from-purple-600 to-blue-600 rounded-3xl shadow-2xl p-6 mb-8 border-4 border-purple-400">
                <div className="flex items-center justify-between">
                  <div className="flex items-center gap-4">
                    <div className="w-16 h-16 bg-white rounded-full flex items-center justify-center">
                      <span className="text-3xl">üëë</span>
                    </div>
                    <div>
                      <h1 className="text-3xl font-black text-white" style={{fontFamily: 'Outfit, sans-serif'}}>
                        PAINEL ADMIN - FUT IBN
                      </h1>
                      <p className="text-purple-100 font-medium">Sorteio autom√°tico ‚Ä¢ Edi√ß√£o de nomes ‚Ä¢ C√≥digo: {ADMIN_CODE}</p>
                    </div>
                  </div>
                  <button
                    onClick={handleLogout}
                    className="px-6 py-3 bg-white text-purple-600 rounded-xl font-bold hover:bg-purple-50 transition-colors"
                  >
                    Sair
                  </button>
                </div>
              </div>

              <div className="grid md:grid-cols-2 gap-6 mb-8">
                <div className="bg-white rounded-2xl shadow-xl p-6">
                  <h3 className="text-lg font-bold text-gray-800 mb-4">üìä Estat√≠sticas</h3>
                  <div className="space-y-2">
                    <div className="flex justify-between">
                      <span className="text-gray-600 font-medium">Total cadastrados:</span>
                      <span className="font-black text-purple-600">{allPlayers.length}</span>
                    </div>
                    <div className="flex justify-between">
                      <span className="text-gray-600 font-medium">Time 1:</span>
                      <span className="font-black text-blue-600">{team1.length}</span>
                    </div>
                    <div className="flex justify-between">
                      <span className="text-gray-600 font-medium">Time 2:</span>
                      <span className="font-black text-red-600">{team2.length}</span>
                    </div>
                    <div className="flex justify-between">
                      <span className="text-gray-600 font-medium">Time 3:</span>
                      <span className="font-black text-gray-600">{team3.length}</span>
                    </div>
                  </div>
                </div>

                <div className="bg-white rounded-2xl shadow-xl p-6">
                  <h3 className="text-lg font-bold text-gray-800 mb-4">üé≤ A√ß√£o</h3>
                  <button
                    onClick={resetarTimes}
                    disabled={allPlayers.length === 0}
                    className="w-full py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white font-bold rounded-xl hover:shadow-lg transform hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                  >
                    üîÑ Resetar Todos os Times
                  </button>
                  <p className="text-xs text-gray-500 mt-2 text-center">
                    Sorteia novos times para TODOS os jogadores
                  </p>
                </div>
              </div>

              {/* GERENCIAMENTO DE DATAS */}
              <div className="bg-white rounded-2xl shadow-xl p-6 mb-8">
                <div className="flex items-center justify-between mb-4">
                  <h3 className="text-xl font-black text-gray-800">üóìÔ∏è Gerenciar Datas dos Jogos</h3>
                  <button
                    onClick={addGameDate}
                    className="px-4 py-2 bg-green-500 text-white rounded-xl font-bold hover:bg-green-600 transition-colors"
                  >
                    + Adicionar Data
                  </button>
                </div>

                {gameDates.length > 0 ? (
                  <div className="space-y-3">
                    {gameDates.map((gameDate, idx) => {
                      const date = new Date(gameDate.date + 'T00:00:00');
                      const dayName = date.toLocaleDateString('pt-BR', { weekday: 'long' });
                      const dateStr = date.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit', year: 'numeric' });
                      
                      return (
                        <div key={idx} className={`rounded-xl p-4 border-2 ${gameDate.active ? 'bg-green-50 border-green-300' : 'bg-gray-50 border-gray-300 opacity-50'}`}>
                          <div className="flex items-center justify-between">
                            <div className="flex-1">
                              <div className="font-black text-lg text-gray-800 capitalize">{dayName}, {dateStr}</div>
                              <div className="text-sm text-gray-600 font-medium">‚è∞ {gameDate.time}</div>
                              <div className="text-sm text-gray-600 font-medium">üìç {gameDate.location}</div>
                            </div>
                            <div className="flex gap-2">
                              <button
                                onClick={() => toggleGameDate(idx)}
                                className={`px-4 py-2 rounded-lg font-bold transition-colors ${
                                  gameDate.active 
                                    ? 'bg-yellow-500 text-white hover:bg-yellow-600' 
                                    : 'bg-green-500 text-white hover:bg-green-600'
                                }`}
                                title={gameDate.active ? 'Cancelar jogo' : 'Ativar jogo'}
                              >
                                {gameDate.active ? '‚úï Cancelar' : '‚úì Ativar'}
                              </button>
                              <button
                                onClick={() => removeGameDate(idx)}
                                className="px-4 py-2 bg-red-500 text-white rounded-lg font-bold hover:bg-red-600 transition-colors"
                                title="Remover data"
                              >
                                üóëÔ∏è Excluir
                              </button>
                            </div>
                          </div>
                        </div>
                      );
                    })}
                  </div>
                ) : (
                  <div className="text-center py-8 text-gray-500">
                    Nenhuma data cadastrada
                  </div>
                )}
              </div>

              <div className="bg-yellow-50 border-2 border-yellow-300 rounded-2xl p-4 mb-6">
                <div className="flex items-center gap-3">
                  <span className="text-2xl">‚ö°</span>
                  <p className="text-yellow-800 font-bold">
                    Os jogadores recebem time e colete AUTOMATICAMENTE ao se cadastrar!
                  </p>
                </div>
              </div>

              <div className="grid md:grid-cols-3 gap-6">
                {[
                  { num: 1, vest: team1Vest, players: team1 },
                  { num: 2, vest: team2Vest, players: team2 },
                  { num: 3, vest: team3Vest, players: team3 }
                ].map(({ num, vest, players }) => (
                  <div key={num} className={`bg-gradient-to-br ${vest ? vestColors[vest].gradient : 'from-gray-500 to-gray-700'} rounded-2xl shadow-xl p-6 text-white`}>
                    <div className="flex items-center gap-3 mb-4">
                      <div className="w-12 h-12 bg-white rounded-full flex items-center justify-center">
                        <span className="text-2xl">{num === 3 ? 'üèÉ' : 'üëï'}</span>
                      </div>
                      <div>
                        <h3 className="text-2xl font-black">TIME {num}</h3>
                        <p className="font-bold opacity-90">
                          {vest ? vestColors[vest].text : 'Aguardando jogadores'}
                        </p>
                      </div>
                    </div>
                    <div className="space-y-2">
                      {players.length > 0 ? (
                        players.map((player, idx) => (
                          <div key={player.id} className="bg-white/20 backdrop-blur rounded-lg p-3">
                            {editingPlayer === player.id ? (
                              <div className="space-y-2">
                                <input
                                  type="text"
                                  defaultValue={player.name}
                                  className="w-full px-3 py-2 rounded-lg text-gray-900 font-bold"
                                  id={`edit-${player.id}`}
                                />
                                <div className="flex gap-2">
                                  <button
                                    onClick={() => {
                                      const newName = document.getElementById(`edit-${player.id}`).value;
                                      editarNome(player.id, newName);
                                    }}
                                    className="flex-1 py-2 bg-green-500 rounded-lg font-bold hover:bg-green-600"
                                  >
                                    ‚úì Salvar
                                  </button>
                                  <button
                                    onClick={() => setEditingPlayer(null)}
                                    className="flex-1 py-2 bg-gray-500 rounded-lg font-bold hover:bg-gray-600"
                                  >
                                    ‚úï Cancelar
                                  </button>
                                </div>
                              </div>
                            ) : (
                              <div className="flex items-center justify-between">
                                <div className="flex-1">
                                  <div className="font-bold">{idx + 1}. {player.name}</div>
                                  <div className="text-xs opacity-75">{player.phone}</div>
                                </div>
                                <div className="flex gap-2">
                                  <button
                                    onClick={() => setEditingPlayer(player.id)}
                                    className="w-8 h-8 bg-blue-500 rounded-full hover:bg-blue-600 transition-colors flex items-center justify-center font-bold"
                                    title="Editar nome"
                                  >
                                    ‚úé
                                  </button>
                                  <button
                                    onClick={() => removerJogador(player.id)}
                                    className="w-8 h-8 bg-red-500 rounded-full hover:bg-red-600 transition-colors flex items-center justify-center font-bold"
                                    title="Remover jogador"
                                  >
                                    ‚úï
                                  </button>
                                </div>
                              </div>
                            )}
                          </div>
                        ))
                      ) : (
                        <div className="text-center opacity-75 py-8 font-medium">
                          Nenhum jogador ainda...
                        </div>
                      )}
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        );
      }

      return null;
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<FutIBNApp />);
  </script>
</body>
</html>
